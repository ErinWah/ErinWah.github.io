
window.onload=function(){
var BrowserInfo = {
    userAgent: navigator.userAgent.toLowerCase(),
    isAndroid: Boolean(navigator.userAgent.match(/android/ig)),
    isIphone: Boolean(navigator.userAgent.match(/iphone|ipod/ig)),
    isIpad: Boolean(navigator.userAgent.match(/ipad/ig)),
    isWeixin: Boolean(navigator.userAgent.match(/MicroMessenger/ig)),
  isQQ: ( /MQQBrowser/i.test(navigator.userAgent) && /QQ/i.test((navigator.userAgent).split('MQQBrowser')))

  }
  var users = [{
    name:'英子',
    time:'2分钟前',
    money:'+50',
    tip:'赚了50元，提现已到账'
  },{
    name:'瑞阁大学士',
    time:'5分钟前',
    money:'+100',
    tip:'赚了100元，提现已到账'
  },{
    name:'豆荚',
    time:'8分钟前',
    money:'+100',
    tip:'赚了100元，提现已到账'
  },{
    name:'hEarth',
    time:'13分钟前',
    money:'+50',
    tip:'赚了50元，提现已到账'
  },{
    name:'是永是之',
    time:'18分钟前',
    money:'+500',
    tip:'赚了500元，提现已到账'
  },{
    name:'赖桑XxX ',
    time:'25分钟前',
    money:'+20',
    tip:'赚了20元，提现已到账'
  },{
    name:'苏某人',
    time:'29分钟前',
    money:'+50',
    tip:'赚了50元，提现已到账'
  },{
    name:'Akotsuki',
    time:'33分钟前',
    money:'+100',
    tip:'赚了100元，提现已到账'
  },{
    name:'默卡卡卡',
    time:'37分钟前',
    money:'+500',
    tip:'赚了500元，提现已到账'
  },{
    name:'心平气和',
    time:'41分钟前',
    money:'+100',
    tip:'赚了100元，提现已到账'
  },{
    name:'噗噜噗噜',
    time:'45分钟前',
    money:'+50',
    tip:'赚了50元，提现已到账'
  },{
    name:'芬姆想当咸鱼',
    time:'49分钟前',
    money:'+50',
    tip:'赚了50元，提现已到账'
  },{
    name:'W·z',
    time:'54分钟前',
    money:'+100',
    tip:'赚了100元，提现已到账'
  },{
    name:'想要乘舟入海',
    time:'55分钟前',
    money:'+100',
    tip:'赚了100元，提现已到账'
  },{
    name:'無䮗',
    time:'58分钟前',
    money:'+100',
    tip:'赚了100元，提现已到账'
  },{
    name:'今天没吃饭',
    time:'1小时前',
    money:'+500',
    tip:'赚了500元，提现已到账'
  },{
    name:'楠顼',
    time:'1小时前',
    money:'+50',
    tip:'赚了50元，提现已到账'
  },{
    name:'林间伞下',
    time:'1小时前',
    money:'+50',
    tip:'赚了50元，提现已到账'
  },{
    name:'sandmº',
    time:'1小时前',
    money:'+20',
    tip:'赚了20元，提现已到账'
  },{
    name:'橘汁酸辣鱼',
    time:'1小时前',
    money:'+500',
    tip:'赚了500元，提现已到账'
  },{
    name:'*笙天*',
    time:'1小时前',
    money:'+100',
    tip:'赚了100元，提现已到账'
  },{
    name:'唉呀呀呀',
    time:'1小时前',
    money:'+50',
    tip:'赚了50元，提现已到账'
  },{
    name:'乔隳承',
    time:'1小时前',
    money:'+50',
    tip:'赚了50元，提现已到账'
  },{
    name:'阿弥豆腐',
    time:'1小时前',
    money:'+100',
    tip:'赚了100元，提现已到账'
  },{
    name:'Vinker伟仔',
    time:'2小时前',
    money:'+100',
    tip:'赚了100元，提现已到账'
  },{
    name:'丶仙安静♡',
    time:'2小时前',
    money:'+100',
    tip:'赚了100元，提现已到账'
  },{
    name:'王景略',
    time:'2小时前',
    money:'+500',
    tip:'赚了500元，提现已到账'
  },{
    name:'吃啥啥不剩',
    time:'2小时前',
    money:'+50',
    tip:'赚了50元，提现已到账'
  },{
    name:'中川木栀',
    time:'2小时前',
    money:'+50',
    tip:'赚了50元，提现已到账'
  },{
    name:'忘れない',
    time:'2小时前',
    money:'+500',
    tip:'赚了500元，提现已到账'
  }]
  // URL = 'http://192.168.3.150:8063/'
  // [1-9][0-9]{4,} QQ
  // /^[a-zA-Z]([-_a-zA-Z0-9]{5,19})+$/ wx
  function Toast(msg,duration){
    duration=isNaN(duration)?800:duration;
    var m = document.createElement('div');
    m.innerHTML = msg;
    m.style.cssText="max-width:60%;min-width: 150px;padding:0 14px;min-height: 40px;color: rgb(255, 255, 255);line-height: 40px;text-align: center;border-radius: 4px;position: fixed;top: 50%;left: 50%;transform: translate(-50%, -50%);z-index: 999999;background: rgba(0, 0, 0,.7);font-size: 16px;";
    document.body.appendChild(m);
    setTimeout(function() {
      var d = 0.5;
      m.style.webkitTransition = '-webkit-transform ' + d + 's ease-in, opacity ' + d + 's ease-in';
      m.style.opacity = '0';
      setTimeout(function() { document.body.removeChild(m) }, d * 1000);
    }, duration);
  }
  
  const app = new Vue({
    el: '#app',
    data:function() {
      return {
        downUrl:'',
        users:users,
        me:{},
        show:false,
        channelKey:'',
        bg:''
      }
  
    },
    created:function(){
      this.$toast.loading({
        message: '加载中...'
      });
    },
    mounted:function () {
      this.channelKey = getUrlParam('u')
      this.getData()
    },
    methods: {
  down:function(){
    if(BrowserInfo.isQQ||BrowserInfo.isWeixin){
      this.show = true
    } else
    if(BrowserInfo.isIphone||BrowserInfo.isIpad){

    } else {
      location.href=this.downUrl

    }
  },
  getData:function(){
    var that = this

    
    var paramU = getUrlParam('u')
    if (paramU) {
      var u = encodeURIComponent(paramU)
    } else {
      var u = ""
      that.bg="xiaoniu"
    }
    var options = {
      u: u
    }
      $loginpost('h5/load', options, function (data) {
        if(data.success){
          that.downUrl = data.data.downUrl
          that.me = data.data
          if(data.data.pac == "com.ronghang.xiaoji.android"){
            that.bg="xiaoji"
          } else {
            that.bg="xiaoniu"

          }
          // if(BrowserInfo.isQQ||BrowserInfo.isWeixin){
          //   // this.show = true
          // } else
          // if(BrowserInfo.isIphone||BrowserInfo.isIpad){
      
          // } else {
          //   location.href=that.downUrl
      
          // }
        }
      })
      var timestamp = Date.parse(new Date());
      var key = 'uykdtnbdfzres'
      var sign = md5(key + timestamp + 'statis/show' )
      var options2 = {
        keyStr: 'inviteLandH5',
        uuid:utdid,
        timestamp: timestamp,
        phoneType:3,
        sign:sign
      }
      var that = this
        $loginpost('statis/show', options2, function (data) {
          if(data.success){
           
          }
        })
  }
    }
  })
  var swiper = new Swiper('.swiper-container', {
    slidesPerView: 5,
    loop: true,
    noSwiping:true,
    // pagination: {
    //   el: '.swiper-pagination',
    //   clickable: true,
    // },
    loop: true,
    autoplay: {
      delay: 1000,
      disableOnInteraction: false,
    },
    // autoplay: 5000,
    //     autoplayDisableOnInteraction: false,
    direction: 'vertical',
  });
  var clipboard = new ClipboardJS('#app');
  clipboard.on('success', function(e) {
    if(app.channelKey){
Toast('邀请码复制成功')
    }
    

 app.down()
  e.clearSelection();
  });
  clipboard.on('error', function(e) {
    if(app.channelKey){
      Toast('邀请码复制失败，请下载后手动输入')
          }
    

   app.down()
      console.log(e)
  });
}